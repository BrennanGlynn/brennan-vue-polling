{"version":3,"sources":["../../../../server/api/poll/thing.socket.js"],"names":["thing","require","exports","register","socket","schema","post","doc","onSave","onRemove","cb","emit"],"mappings":";;AAIA;;AAEA,IAAIA,QAAQC,QAAQ,eAAR,CAAZ;;AAEAC,QAAQC,QAAR,GAAmB,UAAUC,MAAV,EAAkB;AACnCJ,QAAMK,MAAN,CAAaC,IAAb,CAAkB,MAAlB,EAA0B,UAAUC,GAAV,EAAe;AACvCC,WAAOJ,MAAP,EAAeG,GAAf;AACD,GAFD;AAGAP,QAAMK,MAAN,CAAaC,IAAb,CAAkB,QAAlB,EAA4B,UAAUC,GAAV,EAAe;AACzCE,aAASL,MAAT,EAAiBG,GAAjB;AACD,GAFD;AAGD,CAPD;;AASA,SAASC,MAAT,CAAiBJ,MAAjB,EAAyBG,GAAzB,EAA8BG,EAA9B,EAAkC;AAChCN,SAAOO,IAAP,CAAY,YAAZ,EAA0BJ,GAA1B;AACD;;AAED,SAASE,QAAT,CAAmBL,MAAnB,EAA2BG,GAA3B,EAAgCG,EAAhC,EAAoC;AAClCN,SAAOO,IAAP,CAAY,cAAZ,EAA4BJ,GAA5B;AACD","file":"thing.socket.js","sourcesContent":["/**\n * Broadcast updates to client when the model changes\n */\n\n'use strict'\n\nvar thing = require('./thing.model')\n\nexports.register = function (socket) {\n  thing.schema.post('save', function (doc) {\n    onSave(socket, doc)\n  })\n  thing.schema.post('remove', function (doc) {\n    onRemove(socket, doc)\n  })\n}\n\nfunction onSave (socket, doc, cb) {\n  socket.emit('thing:save', doc)\n}\n\nfunction onRemove (socket, doc, cb) {\n  socket.emit('thing:remove', doc)\n}\n"]}