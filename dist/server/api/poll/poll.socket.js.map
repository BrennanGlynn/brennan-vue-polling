{"version":3,"sources":["../../../../server/api/poll/poll.socket.js"],"names":["poll","require","exports","register","socket","schema","post","doc","onSave","onRemove","cb","emit"],"mappings":";;AAMA;;AAEA,IAAIA,OAAOC,QAAQ,cAAR,CAAX;;AAEAC,QAAQC,QAAR,GAAmB,UAAUC,MAAV,EAAkB;AACnCJ,OAAKK,MAAL,CAAYC,IAAZ,CAAiB,MAAjB,EAAyB,UAAUC,GAAV,EAAe;AACtCC,WAAOJ,MAAP,EAAeG,GAAf;AACD,GAFD;AAGAP,OAAKK,MAAL,CAAYC,IAAZ,CAAiB,QAAjB,EAA2B,UAAUC,GAAV,EAAe;AACxCE,aAASL,MAAT,EAAiBG,GAAjB;AACD,GAFD;AAGD,CAPD;;AASA,SAASC,MAAT,CAAiBJ,MAAjB,EAAyBG,GAAzB,EAA8BG,EAA9B,EAAkC;AAChCN,SAAOO,IAAP,CAAY,YAAZ,EAA0BJ,GAA1B;AACD;;AAED,SAASE,QAAT,CAAmBL,MAAnB,EAA2BG,GAA3B,EAAgCG,EAAhC,EAAoC;AAClCN,SAAOO,IAAP,CAAY,cAAZ,EAA4BJ,GAA5B;AACD","file":"poll.socket.js","sourcesContent":["// TODO\n\n/**\n * Broadcast updates to client when the model changes\n */\n\n'use strict'\n\nvar poll = require('./poll.model')\n\nexports.register = function (socket) {\n  poll.schema.post('save', function (doc) {\n    onSave(socket, doc)\n  })\n  poll.schema.post('remove', function (doc) {\n    onRemove(socket, doc)\n  })\n}\n\nfunction onSave (socket, doc, cb) {\n  socket.emit('thing:save', doc)\n}\n\nfunction onRemove (socket, doc, cb) {\n  socket.emit('thing:remove', doc)\n}\n\n"]}